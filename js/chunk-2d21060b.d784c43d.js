(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d21060b"],{b843:function(e,t,n){"use strict";n.r(t);var i=n("9bd2");function a(e,t){return Object(i.a)({url:"admin/user/list?page=".concat(e,"&limit=").concat(t),method:"get"})}var o={data:function(){return{columns:[{title:"#",key:"id",width:"50"},{title:"微信id",key:"openid",width:"180"},{title:"加入时间",key:"created_at",width:"200"},{title:"最后访问",key:"updated_at",width:"200"},{title:"角色",key:"role",width:"180",formatter:this.role2text,filters:[{text:"用户",value:0},{text:"管理员",value:1}],filterMethod:function(e,t){return t.role===e},filterPlacement:"bottom-end",component:{name:"el-select",options:[{value:0,label:"用户"},{value:1,label:"管理员"}]}}],data:[],rowHandle:{columnHeader:"操作",remove:{icon:"el-icon-delete",size:"small",fixed:"right",confirm:!0}},page:1,pageCount:0,pageSize:50}},created:function(){},mounted:function(){var t=this;a(this.page,this.pageSize).then(function(e){t.data=e.data,t.pageCount=e.count})},methods:{role2text:function(e,t,n,a){return 0==n?"用户":"管理员"},handleCellDataChange:function(e,t){var n=this,a=(e.rowIndex,e.key,e.value,e.row);setTimeout(function(){(function(e,t){return Object(i.a)({url:"admin/user/update/"+e,method:"post",data:t})})(a.id,a).then(function(e){n.$message({message:"更新成功",type:"success"}),t()})},300)},handleRowRemove:function(e,t){var n=this,a=(e.index,e.row);setTimeout(function(){(function(e){return Object(i.a)({url:"admin/user/delete/"+e,method:"post"})})(a.id).then(function(e){n.$message({message:"删除成功",type:"success"}),t()})},300)},handleSizeChange:function(e){this.pageSize=e,this.refreshData()},handleCurrentChange:function(e){this.page=e,this.refreshData()},refreshData:function(){var t=this;a(this.page,this.pageSize).then(function(e){t.data=e.data,t.pageCount=e.count})}}},r=n("2877"),s=function(e){e.options.__source="src/views/user/user.vue"},u=Object(r.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",[n("template",{slot:"header"},[e._v("用户列表")]),n("span",[e._v("注意删除用户会删除所有包括审核通过和未审核的所有预约记录")]),n("div",[n("d2-crud",{ref:"d2Crud",attrs:{columns:e.columns,data:e.data,rowHandle:e.rowHandle},on:{"cell-data-change":e.handleCellDataChange,"row-remove":e.handleRowRemove}})],1),n("template",{slot:"footer"},[n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"page-size":e.pageSize,"page-sizes":[50,100,200,300],total:e.pageCount,layout:"sizes, prev, pager, next"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)])],2)},[],!1,null,null,null);"function"==typeof s&&s(u);t.default=u.exports}}]);